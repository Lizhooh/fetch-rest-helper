'use strict';var _extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var d in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a},_createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var isEnv=require('is-env'),qs=require('qs'),util=require('util'),path=require('path'),URL=require('url'),_fetch=function(){if(isEnv('nodejs'))return require('isomorphic-fetch');return isEnv('react-native')?fetch:isEnv('browser')&&window.hasOwnProperty('fetch')?fetch:isEnv('browser')&&!window.hasOwnProperty('fetch')?require('isomorphic-fetch'):void 0}(),Helper=function(){function a(b,c){_classCallCheck(this,a),this.prefix=b,this.options=_extends({json:!0},c),c.host||console.error('please configure the host option.')}return _createClass(a,[{key:'__base',value:function __base(b,c,d){var e='';util.isObject(d.query)&&(e='?'+qs.stringify(d.query));var f=this.options.host||d.host;c=URL.resolve(f,c)+e;var g=this.options.headers||d.headers||{},h=this.options.json||d.json,j=h?JSON.stringify(d.body):d.body;return h?_fetch(c,{method:b,headers:_extends({'Content-Type':'application/json'},g),body:j}).then(function(k){return k.json()}):_fetch(c,{method:b,headers:g,body:j})}},{key:'index',value:function index(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=this.prefix;return this.__base('GET',c,b)}},{key:'show',value:function show(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=path.join(this.prefix,''+b);return this.__base('GET',d,c)}},{key:'create',value:function create(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=this.prefix;return this.__base('POST',c,b)}},{key:'update',value:function update(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=path.join(this.prefix,''+b);return this.__base('PUT',d,c)}},{key:'remove',value:function remove(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=path.join(this.prefix,''+b);return this.__base('DELETE',d,c)}},{key:'edit',value:function edit(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=path.join(this.prefix,''+b,'edit');return this.__base('GET',d,c)}},{key:'new',value:function _new(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=path.join(this.prefix,'new');return this.__base('GET',c,b)}}]),a}();module.exports=Helper;